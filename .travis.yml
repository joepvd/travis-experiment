language: python
python: 2.7
virtualenv:
    system_site_packages: true
sudo: required
dist: trusty
install:
    - |
        for p in $(tr : ' ' <<<$PATH); do 
            if [ -x $p/python ]; then
                echo =================================================
                echo $p
                $p/python --version
            fi
        done
script:
    - echo $PYTHONPATH
    - echo $PYTHONHOME
    - cat ~/virtualenv/python2.7_with_system_site_packages/bin/activate
    - which python
    - python --version
    - echo $PYTHONPATH
    - python -c 'import sys; print(sys.path)'
    - sudo apt-get install -y python-dev libopencv-core-dev python-opencv
    - dpkg -L python-opencv
    - dpkg -l python
    - python -c 'import cv' || true
    - PYTHONPATH=/usr/lib/python2.7/dist-packages python -c 'import cv'
    - deactivate nondestructive
    - python -c 'import cv' || true
notifications:
    email: false
